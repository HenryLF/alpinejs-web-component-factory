import n from"alpinejs";export function WebComponentFactory(o,i,s=()=>({}),r=[]){let e;typeof i=="string"?(e=document.createElement("template"),e.innerHTML=i):e=i;class l extends HTMLElement{root;data;_value="";get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this.data.$val=t,this.dispatchEvent(new Event("input")))}constructor(){super(),this.root=this.attachShadow({mode:"closed"})}connectedCallback(){this.root.appendChild(e.content.cloneNode(!0));const t=s(...r);Object.hasOwn(t,"init")&&typeof t.init=="function"&&t.init(),this.data=n.reactive({$val:this.value,$component:this,$$:a=>this.root.querySelectorAll(a),$:a=>this.root.querySelector(a),...t}),n.effect(()=>{this.data.$val!==this._value&&(this._value=this.data.$val,this.dispatchEvent(new Event("input")))}),n.addScopeToNode(this.root,this.data),n.initTree(this.root)}}customElements.define(o,l)}
