var d=Object.defineProperty;var c=(s,t,e)=>t in s?d(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>c(s,typeof t!="symbol"?t+"":t,e);import i from"alpinejs";export function wcFactory(s,t){let e;typeof t=="string"?(e=document.createElement("template"),e.innerHTML=t):e=t;class o extends HTMLElement{constructor(){super();a(this,"root");a(this,"value");a(this,"state");a(this,"masterUpdate",!1);this.root=this.attachShadow({mode:"open"});const r=this.getAttribute("x-model");r&&this.setAttribute(":val","JSON.stringify(".concat(r,")"));const l=()=>{this.dispatchEvent(new Event("input"))};this.state=i.reactive({data:i.reactive({})});let n=!0;i.effect(()=>{if(JSON.stringify(this.state.data),n||this.masterUpdate){n=!1;return}this.value=this.state.data,l()})}attributeChangedCallback(r,l,n){this.masterUpdate=!0,Object.assign(this.state.data,JSON.parse(n)),this.masterUpdate=!1}connectedCallback(){this.root.appendChild(e.content.cloneNode(!0)),i.addScopeToNode(this.root,this.state),i.initTree(this.root)}}a(o,"observedAttributes",["val"]),customElements.define(s,o)}
